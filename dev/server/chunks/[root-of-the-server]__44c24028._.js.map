{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/repositorios/networking-misiones/networking_misiones/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst globalForPrisma = globalThis as unknown as { prisma?: PrismaClient };\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: [\"error\"],\r\n  });\r\n\r\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AAEF,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/repositorios/networking-misiones/networking_misiones/lib/env.ts"],"sourcesContent":["export const env = {\r\n  DB_HOST: process.env.DB_HOST ?? \"\",\r\n  DB_PORT: process.env.DB_PORT ?? \"\",\r\n  DB_NAME: process.env.DB_NAME ?? \"\",\r\n  DB_USER: process.env.DB_USER ?? \"\",\r\n  DB_PASSWORD: process.env.DB_PASSWORD ?? \"\",\r\n  DATABASE_URL: process.env.DATABASE_URL ?? \"\",\r\n  AUTH_SECRET: process.env.AUTH_SECRET ?? \"\",\r\n};\r\n\r\nexport function assertEnv() {\r\n  const missing = Object.entries(env)\r\n    .filter(([, v]) => !v)\r\n    .map(([k]) => k);\r\n  if (missing.length) {\r\n    throw new Error(\r\n      `Faltan variables de entorno: ${missing.join(\", \")}. Revis√° tu archivo .env.`\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;;;;AAAO,MAAM,MAAM;IACjB,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,aAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;IACxC,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;IAC1C,aAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;AAC1C;AAEO,SAAS;IACd,MAAM,UAAU,OAAO,OAAO,CAAC,KAC5B,MAAM,CAAC,CAAC,GAAG,EAAE,GAAK,CAAC,GACnB,GAAG,CAAC,CAAC,CAAC,EAAE,GAAK;IAChB,IAAI,QAAQ,MAAM,EAAE;QAClB,MAAM,IAAI,MACR,CAAC,6BAA6B,EAAE,QAAQ,IAAI,CAAC,MAAM,yBAAyB,CAAC;IAEjF;AACF","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/repositorios/networking-misiones/networking_misiones/lib/auth.ts"],"sourcesContent":["import bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { env } from \"@/lib/env\";\r\n\r\nexport async function hashPassword(password: string) {\r\n  const salt = await bcrypt.genSalt(10);\r\n  return bcrypt.hash(password, salt);\r\n}\r\n\r\nexport async function verifyPassword(password: string, hash: string) {\r\n  return bcrypt.compare(password, hash);\r\n}\r\n\r\nexport function signToken(payload: object, expiresIn: string = \"7d\") {\r\n  const secret = env.AUTH_SECRET || \"dev-secret\";\r\n  return jwt.sign(payload, secret, { expiresIn: expiresIn as any });\r\n}\r\n\r\nexport function verifyToken(token: string) {\r\n  const secret = env.AUTH_SECRET || \"dev-secret\";\r\n  return jwt.verify(token, secret);\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,aAAa,QAAgB;IACjD,MAAM,OAAO,MAAM,mMAAM,CAAC,OAAO,CAAC;IAClC,OAAO,mMAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,eAAe,eAAe,QAAgB,EAAE,IAAY;IACjE,OAAO,mMAAM,CAAC,OAAO,CAAC,UAAU;AAClC;AAEO,SAAS,UAAU,OAAe,EAAE,YAAoB,IAAI;IACjE,MAAM,SAAS,mHAAG,CAAC,WAAW,IAAI;IAClC,OAAO,2MAAG,CAAC,IAAI,CAAC,SAAS,QAAQ;QAAE,WAAW;IAAiB;AACjE;AAEO,SAAS,YAAY,KAAa;IACvC,MAAM,SAAS,mHAAG,CAAC,WAAW,IAAI;IAClC,OAAO,2MAAG,CAAC,MAAM,CAAC,OAAO;AAC3B","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/repositorios/networking-misiones/networking_misiones/app/api/auth/me/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport { prisma } from \"@/lib/db\";\r\nimport { verifyToken } from \"@/lib/auth\";\r\n\r\nexport async function GET(req: Request) {\r\n  try {\r\n    const cookie = (req as any).headers.get(\"cookie\") || \"\";\r\n    const tokenMatch = cookie.match(/(?:^|;\\s*)token=([^;]+)/);\r\n    const token = tokenMatch?.[1];\r\n    if (!token) {\r\n      return NextResponse.json({ ok: false }, { status: 401 });\r\n    }\r\n\r\n    let decoded: any;\r\n    try {\r\n      decoded = verifyToken(token);\r\n    } catch {\r\n      return NextResponse.json({ ok: false }, { status: 401 });\r\n    }\r\n\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: String(decoded.sub) },\r\n      select: { id: true, email: true, role: true, createdAt: true },\r\n    });\r\n    if (!user) return NextResponse.json({ ok: false }, { status: 401 });\r\n\r\n    const customer = await prisma.customer.findUnique({\r\n      where: { userId: user.id },\r\n      select: { firstName: true, lastName: true }\r\n    });\r\n\r\n    return NextResponse.json({ ok: true, user, customer });\r\n  } catch (e) {\r\n    return NextResponse.json({ ok: false, error: \"Error\" }, { status: 500 });\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,SAAS,AAAC,IAAY,OAAO,CAAC,GAAG,CAAC,aAAa;QACrD,MAAM,aAAa,OAAO,KAAK,CAAC;QAChC,MAAM,QAAQ,YAAY,CAAC,EAAE;QAC7B,IAAI,CAAC,OAAO;YACV,OAAO,+PAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;YAAM,GAAG;gBAAE,QAAQ;YAAI;QACxD;QAEA,IAAI;QACJ,IAAI;YACF,UAAU,IAAA,4HAAW,EAAC;QACxB,EAAE,OAAM;YACN,OAAO,+PAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;YAAM,GAAG;gBAAE,QAAQ;YAAI;QACxD;QAEA,MAAM,OAAO,MAAM,qHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YACxC,OAAO;gBAAE,IAAI,OAAO,QAAQ,GAAG;YAAE;YACjC,QAAQ;gBAAE,IAAI;gBAAM,OAAO;gBAAM,MAAM;gBAAM,WAAW;YAAK;QAC/D;QACA,IAAI,CAAC,MAAM,OAAO,+PAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAM,GAAG;YAAE,QAAQ;QAAI;QAEjE,MAAM,WAAW,MAAM,qHAAM,CAAC,QAAQ,CAAC,UAAU,CAAC;YAChD,OAAO;gBAAE,QAAQ,KAAK,EAAE;YAAC;YACzB,QAAQ;gBAAE,WAAW;gBAAM,UAAU;YAAK;QAC5C;QAEA,OAAO,+PAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;YAAM;QAAS;IACtD,EAAE,OAAO,GAAG;QACV,OAAO,+PAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,OAAO;QAAQ,GAAG;YAAE,QAAQ;QAAI;IACxE;AACF","debugId":null}}]
}