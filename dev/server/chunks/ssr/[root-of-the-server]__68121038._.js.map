{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Documents/repositorios/networking-misiones/networking_misiones/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useState } from \"react\";\r\nimport type { User } from \"@/types/user\";\r\nimport type { Customer } from \"@/types/customer\";\r\n\r\nfunction NavLink({ href, children }: { href: string; children: React.ReactNode }) {\r\n  const pathname = usePathname();\r\n  const active = pathname === href || (href !== \"/\" && pathname.startsWith(href));\r\n  const base = \"px-2 py-1 rounded-md hover:bg-black/5 dark:hover:bg-white/10\";\r\n  const activeCls = active ? \"font-medium underline\" : \"\";\r\n  return (\r\n    <Link href={href} className={`${base} ${activeCls}`} aria-current={active ? \"page\" : undefined}>\r\n      {children}\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default function Navbar() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [customer, setCustomer] = useState<Customer | null>(null);\r\n  const pathname = usePathname();\r\n\r\n  async function logout() {\r\n    try {\r\n      await fetch(\"/api/auth/logout\", { method: \"POST\", credentials: \"include\" });\r\n    } finally {\r\n      setUser(null);\r\n      setCustomer(null);\r\n      // Forzar recarga para que el layout y el proxy reflejen el estado\r\n      window.location.assign(\"/\");\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        const res = await fetch(\"/api/auth/me\", { cache: \"no-store\", credentials: \"include\" });\r\n        if (!mounted) return;\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          if (data?.ok && data.user) {\r\n            setUser(data.user);\r\n            setCustomer(data.customer ?? null);\r\n            return;\r\n          }\r\n        }\r\n        setUser(null);\r\n        setCustomer(null);\r\n      } catch {\r\n        // En caso de error de red, asumimos no autenticado sin romper la UI\r\n        if (!mounted) return;\r\n        setUser(null);\r\n        setCustomer(null);\r\n      }\r\n    })();\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [pathname]);\r\n\r\n  return (\r\n    <header className=\"sticky top-0 z-40 bg-background/80 backdrop-blur border-b border-black/10 dark:border-white/15\">\r\n      <div className=\"mx-auto max-w-6xl px-6 py-3 flex items-center justify-between\">\r\n        <Link href=\"/\" className=\"flex items-center gap-2\">\r\n        <Image src=\"/assets/logo.jpg\" alt=\"Networking Misiones\" width={28} height={28} priority />\r\n          <span className=\"text-lg font-semibold tracking-tight text-brand\">Networking Misiones</span>\r\n        </Link>\r\n        <div className=\"flex items-center gap-3\">\r\n          <nav className=\"flex gap-2 text-sm\">\r\n            <NavLink href=\"/\">Inicio</NavLink>\r\n            {user && (\r\n              <>\r\n                <NavLink href=\"/profile\">Perfil</NavLink>\r\n                <NavLink href=\"/dashboard\">Dashboard</NavLink>\r\n              </>\r\n            )}\r\n            {!user && <NavLink href=\"/login\">Iniciar sesión</NavLink>}\r\n          </nav>\r\n          {user && (\r\n            <div className=\"flex items-center gap-2 text-sm\">\r\n              <div className=\"size-7 rounded-full bg-black/5 dark:bg-white/10 flex items-center justify-center text-xs font-medium\">\r\n                {(customer?.firstName?.[0] ?? user.email[0]).toUpperCase()}\r\n              </div>\r\n              <div className=\"hidden sm:flex items-center gap-2\">\r\n                <span className=\"text-muted\">\r\n                  {customer ? `${customer.firstName} ${customer.lastName}` : user.email}\r\n                </span>\r\n                <span className=\"inline-flex items-center rounded-full border border-border px-2 py-0.5 text-xs text-muted\">\r\n                  {user.role}\r\n                </span>\r\n                <button onClick={logout} className=\"px-2 py-1 rounded-md hover:bg-black/5 dark:hover:bg-white/10\">\r\n                  Cerrar sesión\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"h-px w-full bg-gradient-to-r from-brand/0 via-brand/60 to-brand/0\" />\r\n    </header>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AASA,SAAS,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAA+C;IAC9E,MAAM,WAAW,IAAA,gQAAW;IAC5B,MAAM,SAAS,aAAa,QAAS,SAAS,OAAO,SAAS,UAAU,CAAC;IACzE,MAAM,OAAO;IACb,MAAM,YAAY,SAAS,0BAA0B;IACrD,qBACE,6VAAC,sRAAI;QAAC,MAAM;QAAM,WAAW,GAAG,KAAK,CAAC,EAAE,WAAW;QAAE,gBAAc,SAAS,SAAS;kBAClF;;;;;;AAGP;AAEe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gUAAQ,EAAc;IAC9C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gUAAQ,EAAkB;IAC1D,MAAM,WAAW,IAAA,gQAAW;IAE5B,eAAe;QACb,IAAI;YACF,MAAM,MAAM,oBAAoB;gBAAE,QAAQ;gBAAQ,aAAa;YAAU;QAC3E,SAAU;YACR,QAAQ;YACR,YAAY;YACZ,kEAAkE;YAClE,OAAO,QAAQ,CAAC,MAAM,CAAC;QACzB;IACF;IAEA,IAAA,iUAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,gBAAgB;oBAAE,OAAO;oBAAY,aAAa;gBAAU;gBACpF,IAAI,CAAC,SAAS;gBACd,IAAI,IAAI,EAAE,EAAE;oBACV,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,IAAI,MAAM,MAAM,KAAK,IAAI,EAAE;wBACzB,QAAQ,KAAK,IAAI;wBACjB,YAAY,KAAK,QAAQ,IAAI;wBAC7B;oBACF;gBACF;gBACA,QAAQ;gBACR,YAAY;YACd,EAAE,OAAM;gBACN,oEAAoE;gBACpE,IAAI,CAAC,SAAS;gBACd,QAAQ;gBACR,YAAY;YACd;QACF,CAAC;QACD,OAAO;YACL,UAAU;QACZ;IACF,GAAG;QAAC;KAAS;IAEb,qBACE,6VAAC;QAAO,WAAU;;0BAChB,6VAAC;gBAAI,WAAU;;kCACb,6VAAC,sRAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACzB,6VAAC,uPAAK;gCAAC,KAAI;gCAAmB,KAAI;gCAAsB,OAAO;gCAAI,QAAQ;gCAAI,QAAQ;;;;;;0CACrF,6VAAC;gCAAK,WAAU;0CAAkD;;;;;;;;;;;;kCAEpE,6VAAC;wBAAI,WAAU;;0CACb,6VAAC;gCAAI,WAAU;;kDACb,6VAAC;wCAAQ,MAAK;kDAAI;;;;;;oCACjB,sBACC;;0DACE,6VAAC;gDAAQ,MAAK;0DAAW;;;;;;0DACzB,6VAAC;gDAAQ,MAAK;0DAAa;;;;;;;;oCAG9B,CAAC,sBAAQ,6VAAC;wCAAQ,MAAK;kDAAS;;;;;;;;;;;;4BAElC,sBACC,6VAAC;gCAAI,WAAU;;kDACb,6VAAC;wCAAI,WAAU;kDACZ,CAAC,UAAU,WAAW,CAAC,EAAE,IAAI,KAAK,KAAK,CAAC,EAAE,EAAE,WAAW;;;;;;kDAE1D,6VAAC;wCAAI,WAAU;;0DACb,6VAAC;gDAAK,WAAU;0DACb,WAAW,GAAG,SAAS,SAAS,CAAC,CAAC,EAAE,SAAS,QAAQ,EAAE,GAAG,KAAK,KAAK;;;;;;0DAEvE,6VAAC;gDAAK,WAAU;0DACb,KAAK,IAAI;;;;;;0DAEZ,6VAAC;gDAAO,SAAS;gDAAQ,WAAU;0DAA+D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ5G,6VAAC;gBAAI,WAAU;;;;;;;;;;;;AAGrB","debugId":null}}]
}